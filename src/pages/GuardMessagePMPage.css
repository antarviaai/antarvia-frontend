:root {
    --bg-dark: #000000;
    --bg-panel: #0A0A0A;
    --bg-element: #1C1C1C;
    --glass-bg: rgba(28, 28, 30, 0.6);
    --glass-border: rgba(255, 255, 255, 0.1);
    --text-primary: #F5F5F7;
    --text-secondary: #A0A0A5;
    --accent-blue: #0A84FF;
    --accent-green: #30D158;
    --font-system: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    --border-radius: 14px;
    --transition-speed: 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
}

.chat-wrapper {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: var(--bg-panel);
    background-image: radial-gradient(circle at top left, rgba(10, 132, 255, 0.05), transparent 30%),
                      radial-gradient(circle at bottom right, rgba(10, 132, 255, 0.05), transparent 30%);
    display: flex;
    flex-direction: column;
    font-family: var(--font-system);
    color: var(--text-primary);
}

.chat-header {
    padding: 15px 25px;
    border-bottom: 1px solid var(--glass-border);
    flex-shrink: 0;
    display: flex;
    align-items: center;
    gap: 15px;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    padding-top: calc(15px + env(safe-area-inset-top));
}
.pm-avatar {
    width: 44px; height: 44px; border-radius: 50%;
    background: #BF5AF2; display: grid; place-items: center; font-weight: 600;
}
.pm-info .name { font-size: 1.2rem; font-weight: 600; }
.pm-info .status { font-size: 0.9rem; color: var(--accent-green); }
.pm-info .status.away { color: var(--text-secondary); }

.conversation-log {
    flex-grow: 1;
    overflow-y: auto;
    padding: 30px;
    display: flex;
    flex-direction: column;
}
.conversation-log::-webkit-scrollbar { width: 6px; }
.conversation-log::-webkit-scrollbar-track { background: transparent; }
.conversation-log::-webkit-scrollbar-thumb { background: var(--glass-border); border-radius: 3px; }

.message-bubble {
    max-width: 70%;
    padding: 12px 18px;
    border-radius: var(--border-radius);
    line-height: 1.6;
    margin-bottom: 5px;
    position: relative;
}
.message-bubble.outgoing {
    background: var(--accent-blue);
    color: white;
    align-self: flex-end;
    border-bottom-right-radius: 4px;
}
.message-bubble.incoming {
    background: var(--bg-element);
    align-self: flex-start;
    border-bottom-left-radius: 4px;
}
.message-meta {
    font-size: 0.8rem;
    color: var(--text-secondary);
    margin-bottom: 20px;
}
.meta-outgoing { align-self: flex-end; }
.meta-incoming { align-self: flex-start; }

.composer {
    padding: 20px;
    border-top: 1px solid var(--glass-border);
    display: flex; gap: 10px;
    align-items: flex-end;
    background: rgba(0,0,0,0.2);
    padding-bottom: calc(20px + env(safe-area-inset-bottom));
}
.composer-input {
    flex-grow: 1; padding: 12px 15px; background: var(--bg-panel);
    border: 1px solid var(--glass-border); border-radius: 10px;
    color: var(--text-primary); font-size: 1rem; resize: none;
    font-family: var(--font-system);
    min-height: 48px;
}
.composer-btn {
    background: var(--glass-bg); color: var(--text-secondary); border: 1px solid var(--glass-border);
    width: 48px; height: 48px; border-radius: 10px; font-size: 1.2rem;
    cursor: pointer; flex-shrink: 0;
    display: grid; place-items: center;
    transition: all var(--transition-speed);
}
.composer-btn:hover { border-color: rgba(255,255,255,0.2); color: var(--text-primary); }
.composer-btn.send { background: var(--accent-blue); color: white; border: none; }